#=============== IV Curve Measurement Configuration ===============#

# there's metadata
# theres params needs for instruments to work
# theres params that change how the data looks
# actions, systems, tools

# I'm pretty sure I want to craft a resource that fulfills the type needed for the ivCurve action.

# someone is gonna come in and say this is too complicated. Just... let me do an IV curve.
# ugh.

actions:
  - type: ivCurve
    start_V: 0
    end_V: 1.4
    step_V: 0.005
    vsource_attribute: vsource_1
    vsense_attribute: vsense_1

resources:
  system:
    bias:
      resistor: 100e3
      offset: 0
    device:
      wafer: Kn250130 Offroad # Pa240409
      type: WSi mid-ir pixel
    comments: " p103ln followed by zfl1000"
    amps:
      stage_1: p103ln
      stage_2: zfl1000

  tools:
    instruments:
      - type: sim900-mainframe
        port: /dev/ttyUSB0
        gpibAddr: 2
        modules:
          - slot: 3
            type: sim928
            offline: false
            settlingTime: 0.4 # seconds
            attribute: vsource_1
          - slot: 4
            type: sim970
            offline: false
            channel: 1
            attribute: vsense_1
      - type: dbay-mainframe
        ip_address: 10.7.0.3
        port: 9000
        modules:
          - slot: 5
            type: dac4D
            channel: 2
            attribute: vsource_2
          - slot: 7
            type: acd4D
            channel: 4
            attribute: vsense_2
    saver:
      file_saver:
        type: json
        file_path: "./data/ivcurve_DC"
        include_timestamp: true
        include_metadata: true
    plotter:
      web_plotter:
        address: "http://localhost:5000"
